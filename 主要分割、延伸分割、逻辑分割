# 主要分割、延伸分割、逻辑分割

### 磁盘组成
- 主要启动记录区(Master Boot Record, MBR)：安装开机管理程序的地方，有446 bytes
- 分割表(partition table)：记录整个硬盘分割的状态，64 bytes

由于分割表只有64 bytes, 最多只能容纳4笔分割记录，这4个分割的记录被称为**主要(Primary)或延伸(Extended)分割槽**。

分割槽的最小单位是磁柱(cylinder)

![磁盘分割01](./磁盘分割01.png)

### 磁盘为什么要分割？
1. 数据的安全性
	- 每个分割槽的数据是可以分开的。例如：Windows的系统装在C盘，重装系统时，可以只重装C，而保留D盘的数据。
2. 系统的效能
	- 分割槽将数据**集中**在某个磁柱的区段。例如：第一个分割槽位于磁柱号码1~100，当从该分割槽读取数据时，只需要扫描1~100的磁柱范围就可以了，因为要用到的数据都集中在这里，这有助于数据读取的速度与效能。

### 逻辑分割
- 由延伸分割继续分割出来的分割槽就是**逻辑分割槽(logical parition)**

### 三者关系
- 主要分割和逻辑分割在Linux系统中的装置文件名：
	- P1: /dev/hda1
	- P2: /dev/hda2
	- P3: /dev/hda3
	- P4: /dev/hda4
- 逻辑分割在Linux系统中的装置的文件名：
	- L1: /dev/hda5
	- L2: /dev/hda6
	- L3: /dev/hda7
	- L4: /dev/hda8

注意：即便没有/dev/hda3和/dev/hda4，逻辑分割槽也是从/dev/hda5开始。/dev/hda1、/dev/hda2、/dev/hda3、/dev/hda4 都是保留给主要分割和延伸分割的。

![磁盘分割02](./磁盘分割02.png)


### 两个分割槽可以合并成一个分割槽吗？
- 如果两个分割槽相邻而且同属于延伸分割内的逻辑分割，只需要将两个分割槽删除，再重新建立一个新的分割槽，就能够在不影响其他分割槽的情况下，将两个分割槽的容量整合成一个。
- 如果两个分割槽分别属于主分割和逻辑分割，两者不能够整合在一起。除非将延伸分割破坏掉后再重新分割，但这样做会影响到所有的逻辑分割槽。如果延伸分割被破坏，所有逻辑分割都将会被删除，因为逻辑分割的信息都记录在延伸分割里。

### 总结：
- 主要分割与延伸分割最多可以有4笔（硬盘的限制）
- 延伸分割最多只能有一个（操作系统的限制）
- 逻辑分割是由延伸分割持续切割出来的分割槽
- 能够被格式化后，作为数据存取的分割槽为主要分割与逻辑分割
- 延伸分割无法格式化
- 逻辑分割的数量依操作系统而不同，在Linux系统中，IDE硬盘最多有59个逻辑分割（5号到63号），SATA硬盘则有11个逻辑分割（5号到15号）
